# spring

## 概念

Spring是分层的java SE/EE应用全栈轻量级开源框架。以IoC和AoP为核心技术。

耦合：程序间的依赖给关系。包括类的依赖，方法的依赖。

解耦：降低程序的依赖关系。

应该做到：编译器不依赖，运行时才依赖。

思路：利用反射来创建对象，避免new。通过读取配置文件来获得要创建对象的类名。  

bean：可重用组件的含义。

javabean：java语言编写的可重用组件。javabean > 实体类

## IoC

ApplicationContext在创建容器的时候，创建策略默认是立即加载的方式。只要读取完配置文件，就立刻配置文件中的配置对象。比较适合于单例模式。可以设置单例多例，一级是否延迟加载等。

BeanFactory 在创建核心容器的时候，创建对象采取的策略是采用延迟加载的方式。也就是，根据id获取对象的时候，才真正创建对象。比较适合于多例对象。

**管理bean的细节**：

1. 创建bean的三种方式：

   - 使用默认构造函数创建：在配置文件中使用bean标签，配id，class，不配其它。
   - 使用普通工厂中的方法创建对象（使用某个类中的方法来创建对象，并存入spring容器）。在<bean>中指定factory-bean和factory-method来获取。
   - 使用静态工厂中的静态方法来创建对象，并存入spring容器。使用class来指定静态工程，然后用factory-method来指定调用静态工程的某个方法来创建需要的对象。

2. bean的作用范围：修改<bean>的scope属性：

   - singleton：单例（默认
   - prototype：多例
   - request：作用于web应用的请求范围
   - session：作用于web应用的会话范围
   - global-session：作用域集群环境的会话范围（全局会话范围）当不是集群环境时，他就是session。

3. bean的生命周期：

   - 单例对象：出生：容器创建时对象创建。活：容器还在，对象一直在。死亡：容器销毁，对象消亡。总结：于容器生命周期一致。
   - 多例对象：出生：按需创建。活：对象使用过程中一直活着（jvm来操作？）。死亡：垃圾回收机制来回收。总结：和普通new的对象差不多。

   

